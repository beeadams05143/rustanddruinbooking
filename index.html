<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rust and Ruin Booking Suite</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Work+Sans:wght@300;400;500;600&display=swap"
    />
  </head>
  <body>
    <div class="page">
      <header class="app-header">
        <div>
          <img class="logo" src="logo.png" alt="Rust and Ruin logo" />
          <p class="eyebrow">Rust and Ruin Booking Suite</p>
          <h1>Performance Agreements, Invoices, and Receipts</h1>
          <p class="subhead">
            Build, sign, and export client-ready paperwork in minutes.
          </p>
        </div>
      </header>

      <nav class="tabs top-tabs">
        <button class="tab top-tab active" data-top="login">Sign In</button>
        <button class="tab top-tab" data-top="home">Dashboard</button>
        <button class="tab top-tab" data-top="bookkeeping">Booking Folder</button>
        <button class="tab top-tab" data-top="calendar">Calendar Folder</button>
        <button class="tab top-tab" data-top="contracts">Contracts</button>
        <button class="tab top-tab" data-top="workorders">Work Orders</button>
        <button class="tab top-tab" data-top="shows">Shows</button>
        <button class="tab top-tab" data-top="musicians">Musicians + Tech Crew</button>
        <button class="tab top-tab" data-top="about">About</button>
        <button class="tab cta" id="generatePdf">Generate PDF</button>
        <button class="tab" id="sharePdf" disabled>Share PDF</button>
      </nav>

      <nav class="tabs section-tabs hidden" id="bookkeepingTabs">
        <button class="tab section-tab active" data-panel="agreement">Step 1: Agreement</button>
        <button class="tab section-tab" data-panel="invoice">Step 2: Invoice</button>
        <button class="tab section-tab" data-panel="receipt">Step 3: Receipt</button>
        <button class="tab section-tab" data-panel="contracts">Signed Contracts</button>
        <button class="tab section-tab" data-panel="contractscreated">Contracts Created</button>
      </nav>

      <nav class="tabs section-tabs hidden" id="scheduleTabs">
        <button class="tab section-tab active" data-panel="calendar">Event Calendar</button>
      </nav>

      <nav class="tabs section-tabs hidden" id="aboutTabs">
        <button class="tab section-tab active" data-panel="allabout">App Overview</button>
        <button class="tab section-tab" data-panel="howto">How-To Playbook</button>
      </nav>

      <section class="workspace-head">
        <button class="btn ghost hidden" id="workspaceBack" type="button">Back</button>
        <p class="workspace-kicker">Folder Path</p>
        <h2 id="workspaceTitle">Front Desk</h2>
        <p id="workspaceCrumb" class="muted">Front Desk / Sign In</p>
      </section>

      <p id="pdfStatus" class="pdf-status"></p>
      <main class="layout single" id="loginTab">
        <section class="panel form-panel home-panel">
          <h2>Login</h2>
          <p class="muted">Sign in to access Booking Suite.</p>
          <div class="form-grid login-grid">
            <label>
              Email
              <input id="loginEmail" type="email" placeholder="you@email.com" />
            </label>
            <label>
              Password
              <input id="loginPassword" type="password" placeholder="Password" />
            </label>
          </div>
          <div class="inline-actions login-actions">
            <button class="btn" id="loginSignIn">Sign in</button>
            <button class="btn ghost" id="loginResetPassword">Reset password</button>
            <button class="btn ghost" id="loginMagicLink">Email magic link</button>
            <p id="loginStatus" class="muted"></p>
          </div>
        </section>
      </main>
      <main class="layout single hidden" id="homeTab">
        <section class="panel form-panel dashboard-board">
          <div class="board-head">
            <div>
              <p class="board-kicker">Dashboard</p>
              <h2>Band Managers Desk</h2>
              <p class="muted">Everything in one place before wheels-up.</p>
            </div>
            <div class="board-head-side">
              <div class="vinyl-art" aria-hidden="true"></div>
              <div class="show-record" aria-label="Shows booked record">
                <span class="show-record-title">Shows</span>
                <span>Full: <strong id="showCountFull">0</strong></span>
                <span>Duo: <strong id="showCountDuo">0</strong></span>
                <span>Total: <strong id="showCountTotal">0</strong></span>
              </div>
            </div>
          </div>

          <div class="board-grid">
            <article class="board-card pin-red">
              <h3>Upcoming Shows</h3>
              <p id="upcomingShowsSummary">Shows scheduled for the next 7 days.</p>
              <ul class="board-list" id="upcomingShowsList">
                <li>No shows in the next 7 days.</li>
              </ul>
            </article>

            <article class="board-card pin-gold">
              <h3>Operations Progress</h3>
              <p id="opsProgressSummary">Track completion across tasks, contracts, and confirmations.</p>
              <div class="ops-progress-track" aria-hidden="true">
                <div class="ops-progress-fill" id="opsProgressFill"></div>
              </div>
              <p class="work-order-meta" id="opsProgressDetail">0% complete</p>
            </article>

            <article class="board-card wide pin-blue">
              <h3>Manager Checklist</h3>
              <div id="managerChecklistList">
                <div class="checklist-row">
                  <span>No checklist items yet.</span>
                  <strong>Clear</strong>
                </div>
              </div>
              <button class="btn board-action" id="homeWorkOrders">Open Work Orders</button>
            </article>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="workOrdersTab">
        <section class="panel form-panel">
          <h2>Band Work Orders</h2>
          <p class="muted">Submit tasks for prep, logistics, gear, and promo.</p>
          <div class="form-section" id="workOrderNewSection">
            <h3>New Work Order</h3>
            <div class="form-grid">
              <label>
                Date
                <input id="workOrderDate" type="date" />
              </label>
              <label>
                Task category
                <select id="workOrderCategory">
                  <option value="Bookkeeping">Bookkeeping</option>
                  <option value="Contracts">Contracts</option>
                  <option value="Invoices">Invoices</option>
                  <option value="Calendar / Booking">Calendar / Booking</option>
                  <option value="Social Media">Social Media</option>
                  <option value="Website Tech / App">Website Tech / App</option>
                  <option value="Equipment">Equipment</option>
                  <option value="Marketing Materials">Marketing Materials</option>
                  <option value="Other">Other</option>
                </select>
              </label>
              <label>
                Task description
                <input id="workOrderDescription" placeholder="Book hotel for Albany weekend run" />
              </label>
              <label>
                What needs to be done
                <textarea id="workOrderNeeded" placeholder="Call venue, confirm room block, send receipts to folder..."></textarea>
              </label>
              <label>
                Deadline
                <input id="workOrderDeadline" type="date" />
              </label>
              <label>
                Needed files
                <textarea id="workOrderFiles" placeholder="Contracts, invoices, stage plot PDF, promo artwork..."></textarea>
              </label>
              <label>
                Status
                <select id="workOrderTaskStatus">
                  <option value="Open">Open</option>
                  <option value="In Progress">In Progress</option>
                  <option value="Waiting">Waiting</option>
                  <option value="Completed">Completed</option>
                </select>
              </label>
              <label>
                Follow up
                <input id="workOrderFollowUp" placeholder="Text venue manager Wednesday morning" />
              </label>
            </div>
            <div class="inline-actions">
              <button class="btn" id="workOrderSubmit">Submit Task</button>
              <button class="btn ghost" id="workOrderReset">Clear</button>
              <p id="workOrderStatus" class="muted"></p>
            </div>
          </div>

          <div class="form-section">
            <h3>Open + Completed Tasks</h3>
            <button class="btn ghost hidden" id="workOrderShowAll" type="button">Show all tasks</button>
            <div id="workOrderList" class="work-order-list"></div>
          </div>
        </section>
      </main>

      <div class="message-preview hidden" id="messagePreviewWrap">
        <div class="message-header">
          <h3 id="messageTitle">Agreement Message</h3>
          <button class="btn ghost" id="toggleMessage">Show message</button>
        </div>
        <div id="messageBody" class="message-body hidden"></div>
      </div>

      <main class="layout hidden" id="agreementTab">
        <section class="panel form-panel">
          <h2>Agreement Details</h2>

          <div class="form-section">
            <h3>Client</h3>
            <div class="form-grid">
              <label>
                Client name
                <input id="clientName" placeholder="Jane Booker" />
              </label>
              <label>
                Client email
                <input id="clientEmail" type="email" placeholder="jane@email.com" />
              </label>
              <label>
                Client phone
                <input id="clientPhone" placeholder="(802) 555-0101" />
              </label>
            </div>
          </div>

          <div class="form-section">
            <h3>Event</h3>
            <div class="form-grid">
              <label>
                Performance date
                <input id="performanceDate" type="date" />
              </label>
              <div class="checkbox-group">
                <label class="checkbox">
                  <input id="holidayWeekend" type="checkbox" />
                  Holiday weekend (holiday rate)
                </label>
                <p id="holidayWarning" class="holiday-warning hidden">
                  THIS IS A HOLIDAY WEEKEND
                </p>
              </div>
              <label>
                Performance start time (on stage)
                <input id="performanceTime" type="time" />
              </label>
              <label>
                Performance end time (on stage)
                <input id="performanceEndTime" type="time" />
              </label>
              <label>
                Performance hours (on stage)
                <input id="hours" placeholder="3" />
              </label>
              <div class="field-stack">
                <label>
                  Non-performance hours on site
                  <input id="nonPerformanceHours" disabled />
                </label>
                <label class="checkbox inline-note">
                  <input id="chargeNonPerformance" type="checkbox" />
                  Charge for non-performance time
                </label>
              </div>
              <label>
                Band configuration
                <select id="bandConfig">
                  <option>Full Band</option>
                  <option>Duo</option>
                </select>
              </label>
              <label>
                Additional musicians (beyond band size)
                <input id="additionalMusicians" placeholder="0" />
              </label>
              <label class="checkbox">
                <input id="backlineSound" type="checkbox" />
                Backline / sound tech (+$50 per show)
              </label>
              <label>
                Venue address (GPS)
                <textarea id="venueAddress" placeholder="123 Main St, City, ST 00000"></textarea>
              </label>
            </div>
            <p class="section-total">
              Performance time total: <span data-fill="performanceHoursTotal"></span> hours
            </p>
            <p class="section-total">
              Event subtotal (before add-ons & travel): <span data-fill="eventSubtotal"></span>
            </p>
          </div>

          <div class="form-section">
            <h3>Travel &amp; Lodging</h3>
            <div class="form-grid">
              <label class="checkbox">
                <input id="travelOutside" type="checkbox" />
                Travel time is outside of 2 hours from 56 Kevadus Circle
              </label>
              <div id="travelDetails" class="hidden">
                <label>
                  Hours outside of 2-hour radius
                  <input id="travelHours" placeholder="0.5" />
                </label>
                <label>
                  Number of performers for travel time
                  <input id="travelPerformerCount" type="number" min="1" step="1" placeholder="4" />
                </label>
              </div>
              <label class="checkbox">
                <input id="lodgingEnabled" type="checkbox" />
                Lodging needed (camp/site)
              </label>
              <label id="lodgingRateWrap" class="hidden">
                Lodging rate
                <select id="lodgingRate">
                  <option value="250">Full Band ($250)</option>
                  <option value="125">Duo ($125)</option>
                </select>
              </label>
            </div>
            <p class="section-total">
              Travel &amp; lodging total: <span data-fill="travelLodgingTotal"></span>
            </p>
          </div>

          <div class="form-section">
            <h3>Add-ons</h3>
            <div class="addon-list">
              <label class="checkbox">
                <input id="addonTent" type="checkbox" />
                Tent (+$25)
              </label>
              <label class="checkbox">
                <input id="addonLights" type="checkbox" />
                Lights (+$10)
              </label>
              <label class="checkbox">
                <input id="addonGenerator" type="checkbox" />
                Generator (+$75)
              </label>
              <label class="checkbox">
                <input id="addonAdditionalSong" type="checkbox" />
                Special request song performance (outside our catalog, +$50)
              </label>
              <label class="checkbox">
                <input id="addonRecordedSong" type="checkbox" />
                Recorded song beyond first (+$5)
              </label>
              <label class="checkbox">
                <input id="addonMCing" type="checkbox" />
                MC&apos;ing (event announcements, introductions, or timeline cues, +$50)
              </label>
              <label class="checkbox">
                <input id="addonDJing" type="checkbox" />
                DJ&apos;ing (recorded music sets, dances, or background playlists, +$50)
              </label>
            </div>
            <label class="addon-notes">
              Requested songs (details)
              <textarea id="requestedSongs" placeholder="List requested songs here..."></textarea>
            </label>
            <p class="section-total">
              Add-ons total: <span data-fill="addonTotal"></span>
            </p>
          </div>

          <div class="form-section">
            <h3>Fees &amp; Deposits</h3>
            <div class="form-grid">
              <label>
                Performance fee
                <input id="feeTotal" placeholder="1200" />
              </label>
              <label>
                Backline / sound tech fee
                <input id="feeBackline" readonly />
              </label>
              <label>
                Add-ons total
                <input id="feeAddons" readonly />
              </label>
              <label>
                Deposit amount
                <input id="depositAmount" placeholder="50" />
              </label>
              <label>
                Deposit due (after credits)
                <input id="feeDepositDue" readonly />
              </label>
              <label class="checkbox inline-note">
                <input id="depositEnabled" type="checkbox" checked />
                Apply deposit (default $50)
              </label>
              <label class="checkbox">
                <input id="depositWaived" type="checkbox" />
                Waive deposit (preferred venue)
              </label>
              <div class="field-stack">
                <label class="checkbox">
                  <input id="promoCredit" type="checkbox" />
                  $5 deposit credit for promo post + tag
                </label>
                <label class="checkbox">
                  <input id="liveVideoCredit" type="checkbox" />
                  $10 deposit credit for live video + tag
                </label>
                <p class="inline-help">
                  By selecting credits, client agrees to make the posts.
                </p>
              </div>
              <label>
                Deposit paid
                <input id="depositPaid" />
              </label>
              <label>
                Amount due day of
                <input id="amountDueDayOf" placeholder="$1150" />
              </label>
            </div>
            <p class="section-total">
              Fees &amp; deposits subtotal: <span data-fill="feesSubtotal"></span>
            </p>
            <p class="section-total">
              Deposit credits: <span data-fill="depositCredits"></span>
            </p>
            <p class="section-total">
              Deposit due: <span data-fill="depositDue"></span>
            </p>
          </div>

          <div class="form-footer agreement-actions">
            <p class="inline-help">Client signs on PDF.</p>
            <button class="btn" id="submitAgreement">Submit Agreement</button>
            <button class="btn ghost" id="resetAgreement">Reset Form</button>
            <button class="btn ghost" id="addPendingHold">Add to Calendar (Pending)</button>
            <button class="btn ghost" id="agreementCopyMessage">Copy Agreement Message</button>
            <button class="primary" id="agreementPdf">Generate PDF</button>
          </div>
          <p id="agreementCalendarStatus" class="muted"></p>
        </section>

        <section class="panel preview-panel" aria-label="Agreement preview">
          <div class="contract" id="agreementPreview">
            <div class="contract-header">
              <div>
                <p class="contract-tag">Performance Contract</p>
                  <h2>Rust and Ruin</h2>
              <p class="contract-note">
                Help us grow. Tag Instagram @Rust and Ruin, Facebook @rustandruinvt.
              </p>
              </div>
              <div class="contract-meta">
                <p>Full Band / Duo: <span data-fill="bandConfig"></span></p>
                <p>Agreement created: <span data-fill="agreementCreatedDate"></span></p>
              </div>
            </div>

            <div class="contract-section">
              <h3>1. Fees</h3>
              <p>
                Payment of fees: <span data-fill="totalWithDeposit"></span> for
                <span data-fill="performanceHoursDisplay"></span> hours. Performance date:
                <span data-fill="performanceDate"></span> from
                <span data-fill="performanceTime"></span> to
                <span data-fill="performanceEndTime"></span>. Performance hours (on stage):
                <span data-fill="performanceHoursDisplay"></span> hours · Non-performance hours on site:
                <span data-fill="nonPerformanceHoursDisplay"></span> hours · Non-performance time surcharge:
                <span data-fill="onsiteFee"></span> · Holiday rate surcharge:
                <span data-fill="holidayFee"></span> · Performance fee:
                <span data-fill="performanceFeeAuto"></span>. Add-ons total:
                <span data-fill="addonTotal"></span>. Travel: <span data-fill="travelFee"></span>.
                Lodging: <span data-fill="lodgingFee"></span>. Backline/sound tech:
                <span data-fill="backlineFee"></span>. Non-performance time fee:
                <span data-fill="onsiteFee"></span>. Payment must be made prior to performance. Pay in
                cash, check to Rust and Ruin, Venmo @rustandruinvt, or PayPal @rustandruin. Deposit:
                <span data-fill="depositAmount"></span>. Contract is void if not returned within 10 days.
                <span id="promoCreditsInline" class="hidden">
                  Promo credits: $5 for a promo post with tag and $10 for a live video with tag. If
                  selected, client agrees to make those posts. Credits are applied to the deposit.
                  Tag Instagram @Rust and Ruin, Facebook @rustandruinvt. Deposit credits (promo/live
                  video) require client to post and tag Rust and Ruin.
                </span>
              </p>
            </div>

            <div class="contract-section">
              <h3>2. Scheduling, Load-In, Breaks, Play Time</h3>
              <p>
                Rust and Ruin arrives one hour before sound check. If providing sound, up to 45 minutes
                are required to set up and test. A 10-minute break per 90 minutes is typical. Load-in,
                sound check, and breakdown are included in the performance fee. Non-performance time on
                site is only billed when additional on-site time is requested by the client or venue
                (for example, weddings, memorials, or speeches). Non-performance time (if selected) is
                billed at $50/hour per band member and is prorated to actual time (e.g., 0.25, 0.50,
                0.75, or 1+ hours). Current billed time:
                <span data-fill="nonPerformanceHoursDisplay"></span> hours.
              </p>
            </div>

            <div class="contract-section">
              <h3>3. Cover, Additional Lights, Sound Equipment, Mileage</h3>
              <p>
                Outdoor events require ground cover and shelter (tent/porch/tarp). Sound and light
                equipment needs will be noted in add-ons. Travel time from 56 Kevadus Circle:
                <span data-fill="travelHours"></span> hours outside the 2-hour radius, billed for
                <span data-fill="travelBandMembers"></span> performers. Travel fee:
                <span data-fill="travelFee"></span>.
              </p>
            </div>

            <div class="contract-section">
              <h3>4. Cancellation</h3>
              <p>
                The deposit is non-refundable. Because bookings are made 90 days in advance and
                musicians are contracted, cancellations with less than 90 days notice require payment
                of the full performance fee and the deposit is forfeited.
              </p>
            </div>

            <div class="contract-section">
              <h3>5. Additional Song Requests / MC&apos;ing / DJ&apos;ing · Add-ons</h3>
              <p>
                Additional songs beyond the list are $50 each. Recorded song requests include one
                complimentary request, with additional at $5 each. MC&apos;ing covers event
                announcements, introductions, and timeline cues. DJ&apos;ing covers curated recorded
                music sets (for example, dinner background music, first/last dance songs, and
                transitions between sets). Selected add-ons:
                <span data-fill="addonsSelected"></span>. Requested songs:
                <span data-fill="requestedSongs"></span>.
              </p>
            </div>

            <div class="contract-summary">
              <div>
                <p>Deposit paid: <span data-fill="depositPaid"></span></p>
                <p>Deposit credits: <span data-fill="depositCredits"></span></p>
                <p>Deposit due: <span data-fill="depositDue"></span></p>
                <p>Amount due day of: <span data-fill="amountDueDayOf"></span></p>
              </div>
              <div>
                <div class="summary-header">
                  <p class="summary-title">Summary</p>
                  <span class="badge">Auto-calculated</span>
                </div>
                <p>
                  Performance hours (on stage):
                  <span data-fill="performanceHoursDisplay"></span> hours
                </p>
                <p>Performance fee: <span data-fill="performanceFeeAuto"></span></p>
                <p>Holiday rate surcharge: <span data-fill="holidayFee"></span></p>
                <p>Add-ons total: <span data-fill="addonTotal"></span></p>
                <p>Deposit credits: <span data-fill="depositCredits"></span></p>
                <p>Lodging fee: <span data-fill="lodgingFee"></span></p>
                <p>Travel fee: <span data-fill="travelFee"></span></p>
                <p>Non-performance time fee: <span data-fill="onsiteFee"></span></p>
                <p>Backline / sound tech: <span data-fill="backlineFee"></span></p>
                <p>Total due w/deposit: <span data-fill="totalWithDeposit"></span></p>
              </div>
            </div>

            <div class="contract-signatures">
              <div>
                <p>Client name: <span data-fill="clientName"></span></p>
                <p>Client email: <span data-fill="clientEmail"></span></p>
                <p>Client phone: <span data-fill="clientPhone"></span></p>
                <p>Signature: <span data-fill="signatureName"></span></p>
                <p>Date: <span data-fill="signatureDate"></span></p>
                <p class="signature-note">
                  Client signature required. Please sign with a finger/stylus on your phone, then send a
                  clear photo or scan, or print and sign, return by mail.
                </p>
              </div>
              <div>
                <p>Manager signature: Josh Adams</p>
                <p>Venue address: <span data-fill="venueAddress"></span></p>
              </div>
            </div>

            <footer class="contract-footer">
              <p>Rust and Ruin · 56 Kevadus Circle · Chester, VT 05143</p>
              <p>rustandruinvt@gmail.com · 802-952-6609 (Josh) · 802-952-8225 (Beth)</p>
              <p>www.rustandruin.info</p>
            </footer>
          </div>
        </section>
      </main>

      <main class="layout hidden" id="invoiceTab">
        <section class="panel form-panel">
          <h2>Invoice Details</h2>
          <div class="form-grid">
            <label>
              Invoice number
              <input id="invoiceNumber" value="INV-001" />
            </label>
            <label>
              Client name
              <input id="invoiceClientName" />
            </label>
            <label>
              Client email
              <input id="invoiceClientEmail" />
            </label>
            <label>
              Issue date
              <input id="invoiceIssueDate" type="date" />
            </label>
            <label>
              Due date
              <input id="invoiceDueDate" type="date" />
            </label>
            <label>
              Description
              <input id="invoiceDescription" value="Live performance" />
            </label>
            <div class="checkbox-group">
              <label class="checkbox">
                <input id="invoiceBandFull" type="checkbox" />
                Live performance - Full Band
              </label>
              <label class="checkbox">
                <input id="invoiceBandDuo" type="checkbox" />
                Live performance - Duo
              </label>
            </div>
            <label>
              Performance fee
              <input id="invoicePerformanceFee" />
            </label>
            <label>
              Deposit due (in addition to performance fee)
              <input id="invoiceDepositDue" />
            </label>
            <label>
              Deposit paid
              <input id="invoiceDepositPaid" />
            </label>
            <label>
              Add-ons
              <input id="invoiceAddons" />
            </label>
            <label>
              Manual total override (total due)
              <input id="invoiceTotalOverride" placeholder="$0.00" />
              <span class="field-note">Use this only if you want the total due to be exactly this amount.</span>
            </label>
          </div>
          <div class="form-footer">
            <button class="btn ghost" id="invoiceCopyMessage">Copy Invoice Message</button>
            <button class="primary" id="invoicePdf">Generate PDF</button>
          </div>
          <div class="form-section">
            <h3>Saved Invoices</h3>
            <div class="form-grid">
              <label>
                Upload invoice PDF
                <input id="invoiceFile" type="file" accept="application/pdf" />
              </label>
            </div>
            <div class="inline-actions">
              <button class="btn" id="invoiceSave">Save invoice to cloud</button>
              <button class="btn ghost" id="invoiceUpload">Upload PDF</button>
              <p id="invoiceStatus" class="muted"></p>
            </div>
            <div id="invoiceList" class="event-list"></div>
          </div>
        </section>

        <section class="panel preview-panel" aria-label="Invoice preview">
          <div class="invoice" id="invoicePreview">
            <div class="invoice-header">
              <div>
                <p class="contract-tag">Invoice</p>
                <h2>Rust and Ruin</h2>
                <p data-fill="invoiceNumber"></p>
              </div>
              <div>
                <p>Performance date: <span data-fill="performanceDate"></span></p>
                <p>Issue date: <span data-fill="invoiceIssueDate"></span></p>
                <p>Due date: <span data-fill="invoiceDueDate"></span></p>
              </div>
            </div>
            <div class="invoice-body">
              <p>Bill to: <span data-fill="invoiceClientName"></span></p>
              <p>Email: <span data-fill="invoiceClientEmail"></span></p>
              <div class="invoice-line">
                <span data-fill="invoiceDescription"></span>
                <span data-fill="invoicePerformanceFee"></span>
              </div>
              <div class="invoice-line">
                <span>Deposit due (in addition)</span>
                <span data-fill="invoiceDepositDue"></span>
              </div>
              <div class="invoice-line">
                <span>Deposit paid</span>
                <span data-fill="invoiceDepositPaid"></span>
              </div>
              <div class="invoice-line">
                <span>Add-ons</span>
                <span data-fill="invoiceAddons"></span>
              </div>
              <div class="invoice-total">
                <span>Total due</span>
                <span data-fill="invoiceTotal"></span>
              </div>
            </div>
            <footer class="contract-footer">
              <p>Payment: Venmo @rustandruinvt · PayPal @rustandruin</p>
              <p>rustandruinvt@gmail.com · 802-952-6609</p>
            </footer>
          </div>
        </section>
      </main>

      <main class="layout hidden" id="receiptTab">
        <section class="panel form-panel">
          <h2>Receipt Details</h2>
          <div class="form-grid">
            <label>
              Receipt number
              <input id="receiptNumber" value="RCPT-001" />
            </label>
            <label>
              Client name
              <input id="receiptClientName" />
            </label>
            <label>
              Payment date
              <input id="receiptPaymentDate" type="date" />
            </label>
            <label>
              Amount paid
              <input id="receiptAmountPaid" />
            </label>
            <label>
              Payment method
              <select id="receiptPaymentMethod">
                <option>Venmo</option>
                <option>PayPal</option>
                <option>Check</option>
                <option>Cash</option>
              </select>
            </label>
            <label>
              Related invoice
              <input id="receiptRelatedInvoice" />
            </label>
          </div>
          <div class="form-footer">
            <button class="btn ghost" id="receiptCopyMessage">Copy Receipt Message</button>
            <button class="primary" id="receiptPdf">Generate PDF</button>
          </div>
          <div class="form-section">
            <h3>Saved Receipts</h3>
            <div class="form-grid">
              <label>
                Upload receipt PDF
                <input id="receiptFile" type="file" accept="application/pdf" />
              </label>
            </div>
            <div class="inline-actions">
              <button class="btn" id="receiptSave">Save receipt to cloud</button>
              <button class="btn ghost" id="receiptUpload">Upload PDF</button>
              <p id="receiptStatus" class="muted"></p>
            </div>
            <div id="receiptList" class="event-list"></div>
          </div>
        </section>

        <section class="panel preview-panel" aria-label="Receipt preview">
          <div class="receipt" id="receiptPreview">
            <div class="invoice-header">
              <div>
                <p class="contract-tag">Receipt</p>
                <h2>Rust and Ruin</h2>
                <p data-fill="receiptNumber"></p>
              </div>
              <div>
                <p>Performance date: <span data-fill="performanceDate"></span></p>
                <p>Payment date: <span data-fill="receiptPaymentDate"></span></p>
              </div>
            </div>
            <div class="invoice-body">
              <p>Received from: <span data-fill="receiptClientName"></span></p>
              <p>Payment method: <span data-fill="receiptPaymentMethod"></span></p>
              <p>Related invoice: <span data-fill="receiptRelatedInvoice"></span></p>
              <div class="invoice-total">
                <span>Total paid</span>
                <span data-fill="receiptAmountPaid"></span>
              </div>
            </div>
            <footer class="contract-footer">
              <p>Thank you for supporting live music.</p>
              <p>rustandruinvt@gmail.com · 802-952-6609</p>
            </footer>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="calendarTab">
        <section class="panel form-panel">
          <h2>Band Calendar</h2>

          <div class="form-section" id="calendarAuthSection">
            <h3>Sign In</h3>
            <div class="form-grid">
              <label>
                Email
                <input id="authEmail" type="email" placeholder="you@email.com" />
              </label>
              <label>
                Password
                <input id="authPassword" type="password" placeholder="Password" />
              </label>
              <label>
                Shared override PIN
                <input id="overridePin" type="password" placeholder="Loaded from Supabase" disabled />
              </label>
              <p class="inline-help">
                PIN appears after successful sign-in. If sign-in says invalid credentials,
                use your Supabase Auth password reset first.
              </p>
            </div>
            <div class="inline-actions">
              <button class="btn" id="signIn">Sign in</button>
              <button class="btn ghost" id="resetPassword">Reset password</button>
              <button class="btn ghost" id="signOut">Sign out</button>
              <p id="supabaseStatus" class="muted"></p>
            </div>
          </div>

          <div class="form-section">
            <h3>Calendar</h3>
            <div class="calendar-shell">
              <div class="calendar-header">
                <button class="btn ghost" id="calendarPrev">Previous</button>
                <div class="calendar-title" id="calendarTitle">Month Year</div>
                <button class="btn ghost" id="calendarNext">Next</button>
              </div>
              <div class="calendar-grid calendar-weekdays">
                <div>Sun</div>
                <div>Mon</div>
                <div>Tue</div>
                <div>Wed</div>
                <div>Thu</div>
                <div>Fri</div>
                <div>Sat</div>
              </div>
              <div class="calendar-grid" id="calendarGrid"></div>
            </div>
          </div>

          <div class="form-section">
            <h3>Add or Update Event</h3>
            <div class="inline-actions">
              <button class="btn ghost" id="toggleCalendarForm">Add event</button>
            </div>
            <div id="calendarEventFormWrap" class="hidden">
            <div class="form-grid">
              <label>
                Event type
                <select id="calendarType">
                  <option value="Contract Needed">Contract Needed</option>
                  <option value="Confirmed">Confirmed</option>
                </select>
              </label>
              <label>
                Title
                <input id="calendarEventTitle" placeholder="Client or event name" />
              </label>
              <label>
                Start date
                <input id="calendarStartDate" type="date" />
              </label>
              <label>
                Start time
                <input id="calendarStartTime" type="time" />
              </label>
              <label>
                End date
                <input id="calendarEndDate" type="date" />
              </label>
              <label>
                End time
                <input id="calendarEndTime" type="time" />
              </label>
              <label>
                Schedule every month
                <select id="calendarMonthlyWeek">
                  <option value="">Do not repeat</option>
                  <option value="1">1st week</option>
                  <option value="2">2nd week</option>
                  <option value="3">3rd week</option>
                  <option value="4">4th week</option>
                  <option value="last">Last week</option>
                </select>
              </label>
              <label>
                Notes
                <textarea id="calendarNotes" placeholder="Any details or notes"></textarea>
              </label>
            </div>
            <div class="form-subsection">
              <h4>Musicians needed?</h4>
              <div class="form-grid">
                <label>
                  Musicians needed
                  <select id="calendarMusiciansNeeded">
                    <option value="no">No</option>
                    <option value="yes">Yes</option>
                  </select>
                </label>
              </div>
              <div id="musicianAssignmentsWrap" class="hidden">
                <div id="musicianAssignments" class="assignment-list"></div>
                <p class="muted">Mark who&apos;s playing and the assignment status.</p>
              </div>
            </div>
            <div class="inline-actions">
              <button class="btn" id="calendarSave">Save event</button>
              <button class="btn ghost" id="calendarClear">Clear form</button>
              <p id="calendarConflict" class="warning hidden"></p>
              <label class="pin-field hidden" id="overridePinWrap">
                Override PIN
                <input id="overridePinInput" type="password" placeholder="Enter PIN to override" />
              </label>
            </div>
            </div>
          </div>

          <div class="form-section">
            <h3>Events on selected day</h3>
            <p class="muted" id="selectedEventLabel">Select a date to view events.</p>
            <p class="muted">
              How to link a contract: Click a date, then click <strong>Select</strong> on the event.
              In the Signed Contracts list, click <strong>Link to selected event</strong>.
            </p>
            <div id="eventList" class="event-list"></div>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="contractsTab">
        <section class="panel form-panel">
          <h2>Signed Contracts</h2>
          <p class="muted">Upload, link, and manage signed + draft contract records.</p>
          <div class="form-section">
            <h3>Contract Upload</h3>
            <div class="form-grid">
              <label>
                Contract name
                <input id="contractName" placeholder="Client name + date" />
              </label>
              <label>
                Related event (optional)
                <select id="contractEventId">
                  <option value="">No link</option>
                </select>
              </label>
              <label>
                Upload PDF
                <input id="contractFile" type="file" accept="application/pdf" />
              </label>
            </div>
            <div class="inline-actions">
              <button class="btn" id="uploadContract">Upload signed contract</button>
              <p id="contractStatus" class="muted"></p>
            </div>
          </div>

          <div class="form-section">
            <h3>Signed Contracts</h3>
            <div id="contractList" class="event-list"></div>
          </div>

          <div class="form-section">
            <h3>Draft Contracts</h3>
            <div id="contractDraftList" class="event-list"></div>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="contractsCreatedTab">
        <section class="panel form-panel">
          <h2>Contracts Created</h2>
          <p class="muted">Saved original agreement PDFs for quick resend when clients lose a copy.</p>
          <div class="form-section">
            <h3>Created Agreement Archive</h3>
            <p id="createdContractStatus" class="muted">
              Generate an Agreement PDF from Step 1 and it will be saved here automatically.
            </p>
            <div id="createdContractList" class="event-list"></div>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="contractsHubTab">
        <section class="panel form-panel">
          <h2>Contracts</h2>
          <p class="muted">Manage pending and signed contracts in one place.</p>
          <p id="contractsHubStatus" class="muted"></p>

          <div class="form-section">
            <h3>Drafts / Contracts Pending Signature</h3>
            <div id="contractsHubPendingList" class="event-list"></div>
          </div>

          <div class="form-section">
            <h3>Signed Contracts</h3>
            <div id="contractsHubSignedList" class="event-list"></div>
          </div>

        </section>
      </main>

      <main class="layout single hidden" id="musiciansTab">
        <section class="panel form-panel">
          <h2>Musicians + Tech Crew</h2>

          <div class="form-section">
            <h3>Team Roster</h3>
            <div class="form-grid">
              <label>
                Name
                <input id="musicianName" placeholder="Name" />
              </label>
              <label>
                Role
                <input id="musicianRole" placeholder="Instrument, audio, lights, stage, manager..." />
              </label>
              <label>
                Email
                <input id="musicianEmail" type="email" placeholder="name@email.com" />
              </label>
              <label>
                Phone
                <input id="musicianPhone" placeholder="(802) 555-0101" />
              </label>
              <label>
                Notes
                <textarea id="musicianNotes" placeholder="Availability, pay notes, special setup"></textarea>
              </label>
              <label class="checkbox inline-note">
                <input id="musicianActive" type="checkbox" checked />
                Active
              </label>
            </div>
            <div class="inline-actions">
              <button class="btn" id="addMusician">Add team member</button>
              <button class="btn ghost hidden" id="cancelMusicianEdit">Cancel edit</button>
              <button class="btn ghost" id="seedMusicians">Seed default roster</button>
              <p id="musicianStatus" class="muted"></p>
            </div>
            <div id="musicianList" class="event-list"></div>
          </div>

          <div class="form-section">
            <h3>Musician Blackouts</h3>
            <div class="form-grid">
              <label>
                Musician
                <select id="rosterBlackoutMusician"></select>
              </label>
              <label>
                Start date
                <input id="rosterBlackoutStartDate" type="date" />
              </label>
              <label>
                Start time
                <input id="rosterBlackoutStartTime" type="time" />
              </label>
              <label>
                End date
                <input id="rosterBlackoutEndDate" type="date" />
              </label>
              <label>
                End time
                <input id="rosterBlackoutEndTime" type="time" />
              </label>
              <label>
                Notes
                <textarea id="rosterBlackoutNotes" placeholder="Reason or note"></textarea>
              </label>
            </div>
            <div class="checkbox-group">
              <label class="checkbox">
                <input id="rosterBlackoutAllDay" type="checkbox" />
                All-day blackout
              </label>
            </div>
            <div class="inline-actions">
              <button class="btn" id="saveRosterBlackout">Save blackout</button>
              <p id="rosterBlackoutStatus" class="muted"></p>
            </div>
            <div id="blackoutList" class="event-list"></div>
          </div>

          <div class="form-section">
            <h3>Assignments &amp; Availability</h3>
            <div class="form-grid">
              <label>
                Filter by musician
                <select id="assignmentFilterMusician"></select>
              </label>
              <div class="checkbox-group">
                <label class="checkbox">
                  <input id="assignmentStatusPending" type="checkbox" checked />
                  Pending
                </label>
                <label class="checkbox">
                  <input id="assignmentStatusConfirmed" type="checkbox" checked />
                  Confirmed
                </label>
              </div>
            </div>
            <div id="assignmentList" class="event-list"></div>
          </div>

        </section>
      </main>

      <main class="layout single hidden" id="showsTab">
        <section class="panel form-panel">
          <h2>Shows</h2>
          <p class="muted">Booked dates, players, and open weekend booking windows.</p>

          <div class="form-section">
            <h3>Available Dates to Book (Weekend Dates by Month)</h3>
            <div id="availableDatesList" class="event-list"></div>
          </div>

          <div class="form-section">
            <h3>Booked Dates (Who&apos;s Playing)</h3>
            <div id="bookedDatesList" class="event-list"></div>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="allaboutTab">
        <section class="panel form-panel">
          <h2>About This App</h2>
          <p class="muted">
            Rust and Ruin Booking Suite is designed to make booking management faster,
            cleaner, and more accurate from first inquiry to signed contract and payment.
          </p>
          <div class="howto-grid">
            <article class="form-section howto-card">
              <h3>What It Does</h3>
              <ul class="howto-list">
                <li><strong>Bookkeeping Hub:</strong> Agreement, Invoice, and Receipt tools in one workflow.</li>
                <li><strong>Automatic Calculations:</strong> Hours, fees, backline, add-ons, deposit logic, and day-of totals.</li>
                <li><strong>Calendar Control:</strong> Pending holds, confirmations, and conflict-aware saves with override PIN.</li>
                <li><strong>Contract Tracking:</strong> Upload signed PDFs and open them directly from date chips on calendar.</li>
                <li><strong>Messaging + Sharing:</strong> Generate PDFs, share from phone, and copy document-specific messages.</li>
                <li><strong>Musician Planning:</strong> Roster, assignments, blackouts, and availability visibility.</li>
              </ul>
            </article>
            <article class="form-section howto-card">
              <h3>Why It Helps The Band</h3>
              <ul class="howto-list">
                <li><strong>Faster admin:</strong> fewer repeated steps and less manual calculation.</li>
                <li><strong>More accurate:</strong> agreement numbers and payment docs stay aligned.</li>
                <li><strong>More efficient:</strong> contracts, dates, and status are linked in one place.</li>
                <li><strong>Easier handoff:</strong> same process every time for anyone on the team.</li>
              </ul>
            </article>
          </div>
          <div class="form-section">
            <h3>How To Use This App (Quick Reference)</h3>
            <ul class="howto-list">
              <li><strong>Dashboard:</strong> Check manager checklist, show counts, and progress.</li>
              <li><strong>Booking Folder:</strong> Create Agreement, Invoice, and Receipt documents and generate PDFs.</li>
              <li><strong>Calendar Folder:</strong> Add events, mark Contract Needed vs Confirmed, and manage assignments.</li>
              <li><strong>Contracts Folder:</strong> Keep editable drafts in pending, upload signed PDFs with the checkbox, and open signed files anytime.</li>
              <li><strong>Work Orders:</strong> Track tasks and mark jobs completed.</li>
              <li><strong>Shows:</strong> Review booked shows and open weekend dates by month.</li>
              <li><strong>Musicians + Tech Crew:</strong> Maintain roster, blackouts, and availability.</li>
              <li><strong>About:</strong> Use App Overview and How-To Playbook for deeper walkthroughs.</li>
            </ul>
          </div>
        </section>
      </main>

      <main class="layout single hidden" id="howtoTab">
        <section class="panel form-panel">
          <h2>How To Use Booking Suite</h2>
          <p class="muted">
            Quick guide for creating agreements, managing holds, uploading signed contracts,
            and keeping the calendar accurate.
          </p>

          <div class="howto-grid">
            <article class="form-section howto-card">
              <h3>1. Build Agreement</h3>
              <ol class="howto-list">
                <li>Fill client name, date, start time, and end time.</li>
                <li>Hours, fees, deposit, and day-of amount auto-calculate.</li>
                <li>Choose add-ons and travel options if needed.</li>
                <li>Use <strong>Generate PDF</strong> when ready.</li>
              </ol>
            </article>

            <article class="form-section howto-card">
              <h3>2. Add Pending Date To Calendar</h3>
              <ol class="howto-list">
                <li>Sign in on the Calendar tab first.</li>
                <li>In Agreement, click <strong>Add to Calendar (Pending)</strong>.</li>
                <li>A <strong>Contract Needed</strong> event is created with pending contract status.</li>
                <li>Calendar date marker: <strong>📎</strong> means contract still needed.</li>
              </ol>
            </article>

            <article class="form-section howto-card">
              <h3>3. Select And Confirm Event</h3>
              <ol class="howto-list">
                <li>On Calendar, click the event and press <strong>Select</strong>.</li>
                <li>The form loads the selected event for editing.</li>
                <li>Change type to <strong>Confirmed</strong> and click <strong>Save event</strong>.</li>
              </ol>
            </article>

            <article class="form-section howto-card">
              <h3>4. Upload Signed Contract</h3>
              <ol class="howto-list">
                <li>In Signed Contracts, choose the PDF file.</li>
                <li>Set <strong>Related event</strong> (or use selected event).</li>
                <li>Click <strong>Upload signed contract</strong>.</li>
                <li>Event is auto-marked Confirmed when upload is linked.</li>
                <li>Calendar date marker: <strong>✓</strong> means signed contract uploaded.</li>
              </ol>
            </article>

            <article class="form-section howto-card">
              <h3>5. Contract Markers On Calendar</h3>
              <ul class="howto-list">
                <li><strong>✓</strong> Signed contract is uploaded for that date.</li>
                <li><strong>📎</strong> Contract is still needed for that date.</li>
                <li>Contract name chips on each date are clickable.</li>
              </ul>
            </article>

            <article class="form-section howto-card">
              <h3>6. Share PDFs + Message</h3>
              <ol class="howto-list">
                <li>Open the tab you need: <strong>Agreement</strong>, <strong>Invoice</strong>, or <strong>Receipt</strong>.</li>
                <li>Click <strong>Generate PDF</strong> to create and download that document.</li>
                <li>Click <strong>Share PDF</strong> to send it directly from your phone (if supported).</li>
                <li>Click <strong>Copy Message</strong> to copy the ready-to-send email/text body.</li>
                <li>Paste message in email or text, then attach the generated PDF.</li>
              </ol>
            </article>

            <article class="form-section howto-card">
              <h3>7. Sign-In / PIN Troubleshooting</h3>
              <ul class="howto-list">
                <li>Supabase sign-in email: <code>rustandruinvt@gmail.com</code></li>
                <li>Password hint: <code>Joshnbeth established???</code></li>
                <li>If login fails, use <strong>Reset password</strong> in Calendar sign-in.</li>
                <li>Override PIN loads only after successful login.</li>
                <li>Override PIN is stored in Supabase table <code>app_settings</code>, key <code>override_pin</code>.</li>
              </ul>
            </article>
          </div>
        </section>
      </main>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
